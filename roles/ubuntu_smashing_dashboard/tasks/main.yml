---
- name: Install packages
  apt:
    name: "{{ item }}"
    state: present
  with_items:
    - ruby-full
    - rubygems
    -  build-essential
- name: Install bundler
  gem:
    name: bundler
    state: latest
  become_user: vagrant
- name: Install smashing
  gem:
    name: smashing
    state: present
    version: 1.1.0
  become_user: vagrant
- name: Create directory for dashboard
  file:
    path: /home/vagrant/smashing-dashboards
    state: directory
    mode: 0755
- name: Create smashing project
  command: smashing new my-project
  args:
    chdir: /home/vagrant/smashing-dashboards
- name:
  command: bundle
  args:
    chdir: /home/vagrant/smashing-dashboards/my-project